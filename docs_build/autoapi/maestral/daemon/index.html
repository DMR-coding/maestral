

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>maestral.daemon &mdash; Maestral 1.3.0.dev0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
  <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="maestral.errors" href="../errors/index.html" />
    <link rel="prev" title="maestral.constants" href="../constants/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Maestral
          

          
            
            <img src="../../../_static/maestral.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.3.0.dev0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../config_files.html">Config files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../state_files.html">State files</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#subpackages">Subpackages</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../cli/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.cli</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.client</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../constants/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.constants</span></code></a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.daemon</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-contents">Module Contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../errors/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.errors</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../main/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.main</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../oauth/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.oauth</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../sync/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.sync</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Maestral</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral</span></code></a> &raquo;</li>
        
      <li><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.daemon</span></code></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/autoapi/maestral/daemon/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-maestral.daemon">
<span id="maestral-daemon"></span><h1><a class="reference internal" href="#module-maestral.daemon" title="maestral.daemon"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.daemon</span></code></a><a class="headerlink" href="#module-maestral.daemon" title="Permalink to this headline">¶</a></h1>
<p>This module defines functions to start and stop the sync daemon and retrieve proxy
objects for a running daemon.</p>
<div class="section" id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline">¶</a></h2>
<div class="section" id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.daemon.Stop" title="maestral.daemon.Stop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Stop</span></code></a></p></td>
<td><p>Enumeration of daemon exit results.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.daemon.Start" title="maestral.daemon.Start"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Start</span></code></a></p></td>
<td><p>Enumeration of daemon start results.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.daemon.Lock" title="maestral.daemon.Lock"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Lock</span></code></a></p></td>
<td><p>A inter-process and inter-thread lock. This reuses uses code from oslo.concurrency</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.daemon.MaestralProxy" title="maestral.daemon.MaestralProxy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MaestralProxy</span></code></a></p></td>
<td><p>A Proxy to the Maestral daemon. All methods and properties of Maestral’s public API</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.daemon.serpent_deserialize_api_error" title="maestral.daemon.serpent_deserialize_api_error"><code class="xref py py-obj docutils literal notranslate"><span class="pre">serpent_deserialize_api_error</span></code></a>(class_name: str, d: dict) → MaestralApiError</p></td>
<td><p>Deserializes a <code class="xref py py-class docutils literal notranslate"><span class="pre">errors.MaestralApiError</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.daemon.maestral_lock" title="maestral.daemon.maestral_lock"><code class="xref py py-obj docutils literal notranslate"><span class="pre">maestral_lock</span></code></a>(config_name: str) → Lock</p></td>
<td><p>Returns an inter-process and inter-thread lock for Maestral. This is a wrapper</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.daemon.sockpath_for_config" title="maestral.daemon.sockpath_for_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sockpath_for_config</span></code></a>(config_name: str) → str</p></td>
<td><p>Returns the unix socket location to be used for the config. This should default to</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.daemon.lockpath_for_config" title="maestral.daemon.lockpath_for_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lockpath_for_config</span></code></a>(config_name: str) → str</p></td>
<td><p>Returns the lock file location to be used for the config. This should default to</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.daemon.get_maestral_pid" title="maestral.daemon.get_maestral_pid"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_maestral_pid</span></code></a>(config_name: str) → Optional[int]</p></td>
<td><p>Returns Maestral’s PID if the daemon is running, <code class="docutils literal notranslate"><span class="pre">None</span></code> otherwise.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.daemon.is_running" title="maestral.daemon.is_running"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_running</span></code></a>(config_name: str) → bool</p></td>
<td><p>Checks if a daemon is currently running.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.daemon.start_maestral_daemon" title="maestral.daemon.start_maestral_daemon"><code class="xref py py-obj docutils literal notranslate"><span class="pre">start_maestral_daemon</span></code></a>(config_name: str = 'maestral', log_to_stdout: bool = False, start_sync: bool = False) → None</p></td>
<td><p>Starts the Maestral daemon with event loop in the current thread. Startup is race</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.daemon.start_maestral_daemon_process" title="maestral.daemon.start_maestral_daemon_process"><code class="xref py py-obj docutils literal notranslate"><span class="pre">start_maestral_daemon_process</span></code></a>(config_name: str = 'maestral', log_to_stdout: bool = False, start_sync: bool = False, detach: bool = True) → Start</p></td>
<td><p>Starts the Maestral daemon in a new process by calling <a class="reference internal" href="#maestral.daemon.start_maestral_daemon" title="maestral.daemon.start_maestral_daemon"><code class="xref py py-func docutils literal notranslate"><span class="pre">start_maestral_daemon()</span></code></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.daemon.stop_maestral_daemon_process" title="maestral.daemon.stop_maestral_daemon_process"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stop_maestral_daemon_process</span></code></a>(config_name: str = 'maestral', timeout: float = 10) → Stop</p></td>
<td><p>Stops a maestral daemon process by finding its PID and shutting it down.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt id="maestral.daemon.Stop">
<em class="property">class </em><code class="sig-prename descclassname">maestral.daemon.</code><code class="sig-name descname">Stop</code><a class="headerlink" href="#maestral.daemon.Stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Enumeration of daemon exit results.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Ok</strong> – Daemon quit successfully.</p></li>
<li><p><strong>Killed</strong> – Daemon process was killed.</p></li>
<li><p><strong>NotRunning</strong> – Daemon was not running.</p></li>
<li><p><strong>Failed</strong> – Could not shut down daemon.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="maestral.daemon.Start">
<em class="property">class </em><code class="sig-prename descclassname">maestral.daemon.</code><code class="sig-name descname">Start</code><a class="headerlink" href="#maestral.daemon.Start" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Enumeration of daemon start results.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Ok</strong> – Daemon started successfully.</p></li>
<li><p><strong>AlreadyRunning</strong> – Daemon was already running.</p></li>
<li><p><strong>Failed</strong> – Could not start daemon.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="maestral.daemon.serpent_deserialize_api_error">
<code class="sig-prename descclassname">maestral.daemon.</code><code class="sig-name descname">serpent_deserialize_api_error</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">class_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">d</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span> &#x2192; MaestralApiError<a class="headerlink" href="#maestral.daemon.serpent_deserialize_api_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Deserializes a <code class="xref py py-class docutils literal notranslate"><span class="pre">errors.MaestralApiError</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>class_name</strong> – Name of class to deserialize.</p></li>
<li><p><strong>d</strong> – Dictionary of serialized class.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Class instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="maestral.daemon.Lock">
<em class="property">class </em><code class="sig-prename descclassname">maestral.daemon.</code><code class="sig-name descname">Lock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">lock_path</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#maestral.daemon.Lock" title="Permalink to this definition">¶</a></dt>
<dd><p>A inter-process and inter-thread lock. This reuses uses code from oslo.concurrency
but provides non-blocking acquire. Use the <a class="reference internal" href="#maestral.daemon.Lock.singleton" title="maestral.daemon.Lock.singleton"><code class="xref py py-meth docutils literal notranslate"><span class="pre">singleton()</span></code></a> class method to
retrieve an existing instance for thread-safe usage.</p>
<dl class="py method">
<dt id="maestral.daemon.Lock.singleton">
<em class="property">classmethod </em><code class="sig-name descname">singleton</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cls</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">lock_path</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#maestral.daemon.Lock" title="maestral.daemon.Lock">Lock</a><a class="headerlink" href="#maestral.daemon.Lock.singleton" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve an existing lock object with a given ‘name’ or create a new one. Use
this method for thread-safe locks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of lock file.</p></li>
<li><p><strong>lock_path</strong> – Directory for lock files. Defaults to the temporary directory
returned by <code class="xref py py-func docutils literal notranslate"><span class="pre">tempfile.gettempdir()</span></code> if not given.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.daemon.Lock.acquire">
<code class="sig-name descname">acquire</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.daemon.Lock.acquire" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to acquire the given lock.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Whether or not the acquisition succeeded.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.daemon.Lock.release">
<code class="sig-name descname">release</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.daemon.Lock.release" title="Permalink to this definition">¶</a></dt>
<dd><p>Release the previously acquired lock.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.daemon.Lock.locked">
<code class="sig-name descname">locked</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.daemon.Lock.locked" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the lock is currently held by any thread or process.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.daemon.Lock.locking_pid">
<code class="sig-name descname">locking_pid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>int<span class="p">]</span><a class="headerlink" href="#maestral.daemon.Lock.locking_pid" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the PID of the process which currently holds the lock or <code class="docutils literal notranslate"><span class="pre">None</span></code>. This
should work on macOS, OpenBSD and Linux but may fail on some platforms. Always
use <a class="reference internal" href="#maestral.daemon.Lock.locked" title="maestral.daemon.Lock.locked"><code class="xref py py-meth docutils literal notranslate"><span class="pre">locked()</span></code></a> to check if the lock is held by any process.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The PID of the process which currently holds the lock or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="maestral.daemon.maestral_lock">
<code class="sig-prename descclassname">maestral.daemon.</code><code class="sig-name descname">maestral_lock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#maestral.daemon.Lock" title="maestral.daemon.Lock">Lock</a><a class="headerlink" href="#maestral.daemon.maestral_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an inter-process and inter-thread lock for Maestral. This is a wrapper
around <a class="reference internal" href="#maestral.daemon.Lock" title="maestral.daemon.Lock"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lock</span></code></a> which fills out the appropriate lockfile name and directory for
the given config name.</p>
</dd></dl>

<dl class="py function">
<dt id="maestral.daemon.sockpath_for_config">
<code class="sig-prename descclassname">maestral.daemon.</code><code class="sig-name descname">sockpath_for_config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#maestral.daemon.sockpath_for_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the unix socket location to be used for the config. This should default to
the apps runtime directory + ‘CONFIG_NAME.sock’.</p>
</dd></dl>

<dl class="py function">
<dt id="maestral.daemon.lockpath_for_config">
<code class="sig-prename descclassname">maestral.daemon.</code><code class="sig-name descname">lockpath_for_config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#maestral.daemon.lockpath_for_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the lock file location to be used for the config. This should default to
the apps runtime directory + ‘CONFIG_NAME.lock’.</p>
</dd></dl>

<dl class="py function">
<dt id="maestral.daemon.get_maestral_pid">
<code class="sig-prename descclassname">maestral.daemon.</code><code class="sig-name descname">get_maestral_pid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>int<span class="p">]</span><a class="headerlink" href="#maestral.daemon.get_maestral_pid" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns Maestral’s PID if the daemon is running, <code class="docutils literal notranslate"><span class="pre">None</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config_name</strong> – The name of the Maestral configuration.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The daemon’s PID.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="maestral.daemon.is_running">
<code class="sig-prename descclassname">maestral.daemon.</code><code class="sig-name descname">is_running</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.daemon.is_running" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a daemon is currently running.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config_name</strong> – The name of the Maestral configuration.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether the daemon is running.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="maestral.daemon.start_maestral_daemon">
<code class="sig-prename descclassname">maestral.daemon.</code><code class="sig-name descname">start_maestral_daemon</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'maestral'</span></em>, <em class="sig-param"><span class="n">log_to_stdout</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">start_sync</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.daemon.start_maestral_daemon" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the Maestral daemon with event loop in the current thread. Startup is race
free: there will never be two daemons running for the same config.</p>
<p>Wraps <code class="xref py py-class docutils literal notranslate"><span class="pre">main.Maestral</span></code> as Pyro daemon object, creates a new instance and
starts an asyncio event loop to listen for requests on a unix domain socket. This
call will block until the event loop shuts down. When this function is called from
the main thread on macOS, the asyncio event loop uses Cocoa’s CFRunLoop to process
event. This allows integration with Cocoa frameworks which use callbacks to process
use input such as clicked notifications, etc, and potentially allows showing a GUI.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_name</strong> – The name of the Maestral configuration to use.</p></li>
<li><p><strong>log_to_stdout</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, write logs to stdout.</p></li>
<li><p><strong>start_sync</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, start syncing once the daemon has started.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeError</span></code> if a daemon for the given <code class="docutils literal notranslate"><span class="pre">config_name</span></code> is already
running.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="maestral.daemon.start_maestral_daemon_process">
<code class="sig-prename descclassname">maestral.daemon.</code><code class="sig-name descname">start_maestral_daemon_process</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'maestral'</span></em>, <em class="sig-param"><span class="n">log_to_stdout</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">start_sync</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">detach</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#maestral.daemon.Start" title="maestral.daemon.Start">Start</a><a class="headerlink" href="#maestral.daemon.start_maestral_daemon_process" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the Maestral daemon in a new process by calling <a class="reference internal" href="#maestral.daemon.start_maestral_daemon" title="maestral.daemon.start_maestral_daemon"><code class="xref py py-func docutils literal notranslate"><span class="pre">start_maestral_daemon()</span></code></a>.
Startup is race free: there will never be two daemons running for the same config.
This function requires that <code class="docutils literal notranslate"><span class="pre">sys.executable</span></code> points to a Python executable and
therefore may not work “frozen” apps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_name</strong> – The name of the Maestral configuration to use.</p></li>
<li><p><strong>log_to_stdout</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, write logs to stdout.</p></li>
<li><p><strong>start_sync</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, start syncing once the daemon has started.</p></li>
<li><p><strong>detach</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the daemon process will be detached. If <code class="docutils literal notranslate"><span class="pre">False</span></code>,
the daemon processes will run in the same session as the current process.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">Start.Ok</span></code> if successful, <code class="docutils literal notranslate"><span class="pre">Start.AlreadyRunning</span></code> if the daemon was
already running or <code class="docutils literal notranslate"><span class="pre">Start.Failed</span></code> if startup failed. It is possible that
Start.Ok is returned instead of Start.AlreadyRunning in case of a race.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="maestral.daemon.stop_maestral_daemon_process">
<code class="sig-prename descclassname">maestral.daemon.</code><code class="sig-name descname">stop_maestral_daemon_process</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'maestral'</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">10</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#maestral.daemon.Stop" title="maestral.daemon.Stop">Stop</a><a class="headerlink" href="#maestral.daemon.stop_maestral_daemon_process" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops a maestral daemon process by finding its PID and shutting it down.</p>
<p>This function first tries to shut down Maestral gracefully. If this fails and we
know its PID, it will send SIGTERM. If that fails as well, it will send SIGKILL to
the process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_name</strong> – The name of the Maestral configuration to use.</p></li>
<li><p><strong>timeout</strong> – Number of sec to wait for daemon to shut down before killing it.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">Stop.Ok</span></code> if successful, <code class="docutils literal notranslate"><span class="pre">Stop.Killed</span></code> if killed, <code class="docutils literal notranslate"><span class="pre">Stop.NotRunning</span></code>
if the daemon was not running and <code class="docutils literal notranslate"><span class="pre">Exit.Failed</span></code> if killing the process failed
because we could not retrieve its PID.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="maestral.daemon.MaestralProxy">
<em class="property">class </em><code class="sig-prename descclassname">maestral.daemon.</code><code class="sig-name descname">MaestralProxy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'maestral'</span></em>, <em class="sig-param"><span class="n">fallback</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#maestral.daemon.MaestralProxy" title="Permalink to this definition">¶</a></dt>
<dd><p>A Proxy to the Maestral daemon. All methods and properties of Maestral’s public API
are accessible and calls / access will be forwarded to the corresponding Maestral
instance. This class can be used as a context manager to close the connection to the
daemon on exit.</p>
<dl class="field-list">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>Use MaestralProxy as a context manager:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">MaestralProxy</span><span class="p">()</span> <span class="k">as</span> <span class="n">m</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>
</pre></div>
</div>
<p>Use MaestralProxy directly:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">MaestralProxy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">_disconnect</span><span class="p">()</span>
</pre></div>
</div>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>config_name</strong> – The name of the Maestral configuration to use.</p></li>
<li><p><strong>fallback</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, a new instance of Maestral will created in the current
process when the daemon is not running.</p></li>
</ul>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Pyro5.errors.CommunicationError</span></code> if the daemon is running but
cannot be reached or if the daemon is not running and <code class="docutils literal notranslate"><span class="pre">fallback</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../errors/index.html" class="btn btn-neutral float-right" title="maestral.errors" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../constants/index.html" class="btn btn-neutral float-left" title="maestral.constants" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Sam Schott

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>