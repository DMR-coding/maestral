

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>maestral.sync &mdash; Maestral 1.3.0.dev0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
  <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="prev" title="maestral.oauth" href="../oauth/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Maestral
          

          
            
            <img src="../../../_static/maestral.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.3.0.dev0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../config_files.html">Config files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../state_files.html">State files</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#subpackages">Subpackages</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../cli/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.cli</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../client/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.client</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../constants/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.constants</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../daemon/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.daemon</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../errors/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.errors</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../main/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.main</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../oauth/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.oauth</span></code></a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.sync</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-contents">Module Contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Maestral</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral</span></code></a> &raquo;</li>
        
      <li><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.sync</span></code></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/autoapi/maestral/sync/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-maestral.sync">
<span id="maestral-sync"></span><h1><a class="reference internal" href="#module-maestral.sync" title="maestral.sync"><code class="xref py py-mod docutils literal notranslate"><span class="pre">maestral.sync</span></code></a><a class="headerlink" href="#module-maestral.sync" title="Permalink to this headline">¶</a></h1>
<p>This module contains the main syncing functionality.</p>
<div class="section" id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline">¶</a></h2>
<div class="section" id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.sync.Conflict" title="maestral.sync.Conflict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Conflict</span></code></a></p></td>
<td><p>Enumeration of sync conflict types.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.sync.SyncDirection" title="maestral.sync.SyncDirection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SyncDirection</span></code></a></p></td>
<td><p>Enumeration of sync direction.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.sync.SyncStatus" title="maestral.sync.SyncStatus"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SyncStatus</span></code></a></p></td>
<td><p>Enumeration of sync status values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.sync.ItemType" title="maestral.sync.ItemType"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ItemType</span></code></a></p></td>
<td><p>Enumeration of SyncEvent types.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.sync.ChangeType" title="maestral.sync.ChangeType"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ChangeType</span></code></a></p></td>
<td><p>Enumeration of SyncEvent change types.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.sync.FSEventHandler" title="maestral.sync.FSEventHandler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FSEventHandler</span></code></a></p></td>
<td><p>Handles captured file events and adds them to <a class="reference internal" href="#maestral.sync.SyncEngine" title="maestral.sync.SyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">SyncEngine</span></code></a>’s file event queue</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.sync.PersistentStateMutableSet" title="maestral.sync.PersistentStateMutableSet"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PersistentStateMutableSet</span></code></a></p></td>
<td><p>A wrapper for a list of Python types in the saved state that implements a MutableSet</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SyncEvent</span></code></a></p></td>
<td><p>Represents a file or folder change in the sync queue. This is used to abstract the</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.sync.IndexEntry" title="maestral.sync.IndexEntry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IndexEntry</span></code></a></p></td>
<td><p>Represents an entry in our local sync index. All arguments are used to construct</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.sync.HashCacheEntry" title="maestral.sync.HashCacheEntry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">HashCacheEntry</span></code></a></p></td>
<td><p>An entry in our cache of content hashes.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.sync.SyncEngine" title="maestral.sync.SyncEngine"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SyncEngine</span></code></a></p></td>
<td><p>Class that contains methods to sync local file events with Dropbox and vice versa.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.sync.SyncMonitor" title="maestral.sync.SyncMonitor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SyncMonitor</span></code></a></p></td>
<td><p>Class to sync changes between Dropbox and a local folder. It creates five threads:</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.sync.download_worker" title="maestral.sync.download_worker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">download_worker</span></code></a>(sync: SyncEngine, syncing: Event, running: Event, connected: Event) → None</p></td>
<td><p>Worker to sync changes of remote Dropbox with local folder.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.sync.download_worker_added_item" title="maestral.sync.download_worker_added_item"><code class="xref py py-obj docutils literal notranslate"><span class="pre">download_worker_added_item</span></code></a>(sync: SyncEngine, syncing: Event, running: Event, connected: Event, added_item_queue: Queue[str]) → None</p></td>
<td><p>Worker to download items which have been newly included in sync.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.sync.upload_worker" title="maestral.sync.upload_worker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">upload_worker</span></code></a>(sync: SyncEngine, syncing: Event, running: Event, connected: Event) → None</p></td>
<td><p>Worker to sync local changes to remote Dropbox.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.sync.startup_worker" title="maestral.sync.startup_worker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">startup_worker</span></code></a>(sync: SyncEngine, syncing: Event, running: Event, connected: Event, startup: Event, paused_by_user: Event) → None</p></td>
<td><p>Worker to sync local changes to remote Dropbox.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.sync.exc_info_tuple" title="maestral.sync.exc_info_tuple"><code class="xref py py-obj docutils literal notranslate"><span class="pre">exc_info_tuple</span></code></a>(exc: BaseException) → ExecInfoType</p></td>
<td><p>Creates an exc-info tuple from an exception.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.sync.get_dest_path" title="maestral.sync.get_dest_path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_dest_path</span></code></a>(event: FileSystemEvent) → str</p></td>
<td><p>Returns the dest_path of a file system event if present (moved events only)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.sync.split_moved_event" title="maestral.sync.split_moved_event"><code class="xref py py-obj docutils literal notranslate"><span class="pre">split_moved_event</span></code></a>(event: Union[FileMovedEvent, DirMovedEvent]) → Tuple[FileSystemEvent, FileSystemEvent]</p></td>
<td><p>Splits a FileMovedEvent or DirMovedEvent into “deleted” and “created” events of the</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.sync.entries_repr" title="maestral.sync.entries_repr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">entries_repr</span></code></a>(entries: List[Metadata]) → str</p></td>
<td><p>Generates a nicely formatted string repr from a list of Dropbox metadata.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.sync.throttled_log" title="maestral.sync.throttled_log"><code class="xref py py-obj docutils literal notranslate"><span class="pre">throttled_log</span></code></a>(log: logging.Logger, msg: str, level: int = logging.INFO, limit: int = 2) → None</p></td>
<td><p>Emits the given log message only if the previous message was emitted more than</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#maestral.sync.cpu_usage_percent" title="maestral.sync.cpu_usage_percent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cpu_usage_percent</span></code></a>(interval: float = 0.1) → float</p></td>
<td><p>Returns a float representing the CPU utilization of the current process as a</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maestral.sync.check_connection" title="maestral.sync.check_connection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_connection</span></code></a>(hostname: str) → bool</p></td>
<td><p>A low latency check for an internet connection.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt id="maestral.sync.Conflict">
<em class="property">class </em><code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">Conflict</code><a class="headerlink" href="#maestral.sync.Conflict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Enumeration of sync conflict types.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>RemoteNewer</strong> – Remote item is newer.</p></li>
<li><p><a class="reference internal" href="#maestral.sync.Conflict" title="maestral.sync.Conflict"><strong>Conflict</strong></a> – Conflict.</p></li>
<li><p><strong>Identical</strong> – Items are identical.</p></li>
<li><p><strong>LocalNewerOrIdentical</strong> – Local item is newer or identical.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="maestral.sync.SyncDirection">
<em class="property">class </em><code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">SyncDirection</code><a class="headerlink" href="#maestral.sync.SyncDirection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Enumeration of sync direction.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Up</strong> – Upload.</p></li>
<li><p><strong>Down</strong> – Download.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="maestral.sync.SyncStatus">
<em class="property">class </em><code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">SyncStatus</code><a class="headerlink" href="#maestral.sync.SyncStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Enumeration of sync status values.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Queued</strong> – Queued for syncing.</p></li>
<li><p><strong>Syncing</strong> – Sync in progress.</p></li>
<li><p><strong>Done</strong> – Sync successfully completed.</p></li>
<li><p><strong>Failed</strong> – Sync failed.</p></li>
<li><p><strong>Skipped</strong> – Item was already in sync.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="maestral.sync.ItemType">
<em class="property">class </em><code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">ItemType</code><a class="headerlink" href="#maestral.sync.ItemType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Enumeration of SyncEvent types.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>File</strong> – File type.</p></li>
<li><p><strong>Folder</strong> – Folder type.</p></li>
<li><p><strong>Unknown</strong> – Item type could not be determined. This can occur for remote deleted
events, see issue #198.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="maestral.sync.ChangeType">
<em class="property">class </em><code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">ChangeType</code><a class="headerlink" href="#maestral.sync.ChangeType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Enumeration of SyncEvent change types.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Added</strong> – An added file or folder.</p></li>
<li><p><strong>Removed</strong> – A deleted file or folder.</p></li>
<li><p><strong>Moved</strong> – A moved file or folder.</p></li>
<li><p><strong>Modified</strong> – A modified file. Does not apply to folders.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="maestral.sync.FSEventHandler">
<em class="property">class </em><code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">FSEventHandler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">syncing</span><span class="p">:</span> <span class="n">Event</span></em>, <em class="sig-param"><span class="n">startup</span><span class="p">:</span> <span class="n">Event</span></em><span class="sig-paren">)</span><a class="headerlink" href="#maestral.sync.FSEventHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">watchdog.events.FileSystemEventHandler</span></code></p>
<p>Handles captured file events and adds them to <a class="reference internal" href="#maestral.sync.SyncEngine" title="maestral.sync.SyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">SyncEngine</span></code></a>’s file event queue
to be uploaded by <a class="reference internal" href="#maestral.sync.upload_worker" title="maestral.sync.upload_worker"><code class="xref py py-meth docutils literal notranslate"><span class="pre">upload_worker()</span></code></a>. This acts as a translation layer between
<code class="xref py py-class docutils literal notranslate"><span class="pre">watchdog.Observer</span></code> and <a class="reference internal" href="#maestral.sync.SyncEngine" title="maestral.sync.SyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">SyncEngine</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>syncing</strong> – Set when syncing is running.</p></li>
<li><p><strong>startup</strong> – Set when startup is running.</p></li>
</ul>
</dd>
<dt class="field-even">Variables</dt>
<dd class="field-even"><p><strong>ignore_timeout</strong> (<em>float</em>) – Timeout in seconds after which ignored paths will be
discarded.</p>
</dd>
</dl>
<dl class="py method">
<dt id="maestral.sync.FSEventHandler.ignore">
<code class="sig-name descname">ignore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">events</span><span class="p">:</span> <span class="n">FileSystemEvent</span></em>, <em class="sig-param"><span class="n">recursive</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; Iterator<span class="p">[</span>None<span class="p">]</span><a class="headerlink" href="#maestral.sync.FSEventHandler.ignore" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager to ignore file events. Once a matching event has been
registered, further matching events will no longer be ignored unless
<code class="docutils literal notranslate"><span class="pre">recursive</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>. If no matching event has occurred before leaving the
context, the event will be ignored for <code class="docutils literal notranslate"><span class="pre">ignore_timeout</span></code> sec after leaving then
context and then discarded. This accounts for possible delays in the emission of
local file system events.</p>
<p>This context manager is used to filter out file system events caused by maestral
itself, for instance during a download or when moving a conflict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>events</strong> – Local events to ignore.</p></li>
<li><p><strong>recursive</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, all child events of a directory event will be
ignored as well. This parameter will be ignored for file events.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.FSEventHandler.on_any_event">
<code class="sig-name descname">on_any_event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">event</span><span class="p">:</span> <span class="n">FileSystemEvent</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.FSEventHandler.on_any_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback on any event. Checks if the system file event should be ignored. If
not, adds it to the queue for events to upload. If syncing is paused or stopped,
all events will be ignored.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event</strong> – Watchdog file event.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="maestral.sync.PersistentStateMutableSet">
<em class="property">class </em><code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">PersistentStateMutableSet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">section</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">option</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#maestral.sync.PersistentStateMutableSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.MutableSet</span></code></p>
<p>A wrapper for a list of Python types in the saved state that implements a MutableSet
interface.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_name</strong> – Name of config (determines name of state file).</p></li>
<li><p><strong>section</strong> – Section name in state file.</p></li>
<li><p><strong>option</strong> – Option name in state file.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="maestral.sync.PersistentStateMutableSet.add">
<code class="sig-name descname">add</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">entry</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.PersistentStateMutableSet.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an element.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.PersistentStateMutableSet.discard">
<code class="sig-name descname">discard</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">entry</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.PersistentStateMutableSet.discard" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove an element.  Do not raise an exception if absent.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.PersistentStateMutableSet.clear">
<code class="sig-name descname">clear</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.PersistentStateMutableSet.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears all elements.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="maestral.sync.SyncEvent">
<em class="property">class </em><code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">SyncEvent</code><a class="headerlink" href="#maestral.sync.SyncEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Base</span></code></p>
<p>Represents a file or folder change in the sync queue. This is used to abstract the
<code class="xref py py-class docutils literal notranslate"><span class="pre">watchdog.events.FileSystemEvent</span></code> created for local changes and the
<code class="xref py py-class docutils literal notranslate"><span class="pre">dropbox.files.Metadata</span></code> created for remote changes. All arguments are used
to construct instance attributes and some attributes may not be set for all event
types. Note that some instance attributes depend on the state of the Maestral
instance, e.g., <code class="xref py py-attr docutils literal notranslate"><span class="pre">local_path</span></code> will depend on the current path of the local
Dropbox folder. They may therefore become invalid after sync sessions.</p>
<p>The convenience methods <a class="reference internal" href="#maestral.sync.SyncEvent.from_dbx_metadata" title="maestral.sync.SyncEvent.from_dbx_metadata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_dbx_metadata()</span></code></a> and <a class="reference internal" href="#maestral.sync.SyncEvent.from_file_system_event" title="maestral.sync.SyncEvent.from_file_system_event"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_file_system_event()</span></code></a>
should be used to properly construct a SyncEvent from Dropbox Metadata or a local
FileSystemEvent, respectively.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>direction</strong> – Direction of the sync: upload or download.</p></li>
<li><p><strong>item_type</strong> – The item type: file or folder or undetermined (in rare cases where
we cannot determine the type of a deleted file).</p></li>
<li><p><strong>sync_time</strong> – The time the SyncEvent was registered.</p></li>
<li><p><strong>dbx_id</strong> – A unique dropbox ID for the file or folder. Will only be set for
download events which are not deletions.</p></li>
<li><p><strong>dbx_path</strong> – Dropbox path of the item to sync. If the sync represents a move
operation, this will be the destination path. Follows the casing from server.</p></li>
<li><p><strong>dbx_path_from</strong> – Dropbox path that this item was moved from. Will only be set
if <code class="docutils literal notranslate"><span class="pre">change_type</span></code> is <code class="docutils literal notranslate"><span class="pre">ChangeType.Moved</span></code>. Follows the casing from server.</p></li>
<li><p><strong>local_path</strong> – Local path of the item to sync. If the sync represents a move
operation, this will be the destination path. Follows the casing from server.</p></li>
<li><p><strong>local_path_from</strong> – Local path that this item was moved from. Will only be set
if <code class="docutils literal notranslate"><span class="pre">change_type</span></code> is <code class="docutils literal notranslate"><span class="pre">ChangeType.Moved</span></code>. Follows the casing from server.</p></li>
<li><p><strong>rev</strong> – The file revision. Will only be set for remote changes. Will be
‘folder’ for folders and None for deletions.</p></li>
<li><p><strong>content_hash</strong> – A hash representing the file content. Will be ‘folder’ for
folders and None for deleted items. Set for both local and remote changes.</p></li>
<li><p><strong>change_type</strong> – The type of change: deleted, moved, added or changed. Remote
SyncEvents currently do not generate moved events but are reported as deleted
and added at the new location.</p></li>
<li><p><strong>change_time</strong> – The time of the change: Local ctime or remote client_modified
time for files. None for folders or for remote deletions. Note that the
client_modified may not be reliable as it is set by other clients and not
verified.</p></li>
<li><p><strong>change_dbid</strong> – The Dropbox ID of the account which performed the changes. This
may not be set for added folders or deletions on the server.</p></li>
<li><p><strong>change_user_name</strong> – The user name corresponding to <code class="docutils literal notranslate"><span class="pre">change_dbid</span></code>, if the
account still exists. This field may not be set for performance reasons.</p></li>
<li><p><strong>status</strong> – Field containing the sync status: queued, syncing, done, failed,
skipped (item was already in sync) or aborted (by the user).</p></li>
<li><p><strong>size</strong> – Size of the item in bytes. Always zero for folders.</p></li>
<li><p><strong>completed</strong> – File size in bytes which has already been uploaded or downloaded.
Always zero for folders.</p></li>
</ul>
</dd>
<dt class="field-even">Variables</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>id</strong> – A unique identifier of the SyncEvent.</p></li>
<li><p><strong>change_time_or_sync_time</strong> – Change time when available, otherwise sync time.
This can be used for sorting or user information purposes.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="maestral.sync.SyncEvent.is_file">
<em class="property">property </em><code class="sig-name descname">is_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEvent.is_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True for file changes</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEvent.is_directory">
<em class="property">property </em><code class="sig-name descname">is_directory</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEvent.is_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True for folder changes</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEvent.is_added">
<em class="property">property </em><code class="sig-name descname">is_added</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEvent.is_added" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True for added items</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEvent.is_moved">
<em class="property">property </em><code class="sig-name descname">is_moved</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEvent.is_moved" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True for moved items</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEvent.is_changed">
<em class="property">property </em><code class="sig-name descname">is_changed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEvent.is_changed" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True for changed file contents</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEvent.is_deleted">
<em class="property">property </em><code class="sig-name descname">is_deleted</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEvent.is_deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True for deleted items</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEvent.is_upload">
<em class="property">property </em><code class="sig-name descname">is_upload</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEvent.is_upload" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True for changes to upload</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEvent.is_download">
<em class="property">property </em><code class="sig-name descname">is_download</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEvent.is_download" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True for changes to download</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEvent.from_dbx_metadata">
<em class="property">classmethod </em><code class="sig-name descname">from_dbx_metadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cls</span></em>, <em class="sig-param"><span class="n">md</span><span class="p">:</span> <span class="n">Metadata</span></em>, <em class="sig-param"><span class="n">sync_engine</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#maestral.sync.SyncEngine" title="maestral.sync.SyncEngine">SyncEngine</a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a><a class="headerlink" href="#maestral.sync.SyncEvent.from_dbx_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a SyncEvent from the given Dropbox metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>md</strong> – Dropbox Metadata.</p></li>
<li><p><strong>sync_engine</strong> – SyncEngine instance.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of this class with attributes populated from the given
Dropbox Metadata.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEvent.from_file_system_event">
<em class="property">classmethod </em><code class="sig-name descname">from_file_system_event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cls</span></em>, <em class="sig-param"><span class="n">event</span><span class="p">:</span> <span class="n">FileSystemEvent</span></em>, <em class="sig-param"><span class="n">sync_engine</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#maestral.sync.SyncEngine" title="maestral.sync.SyncEngine">SyncEngine</a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a><a class="headerlink" href="#maestral.sync.SyncEvent.from_file_system_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a SyncEvent from the given local file system event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event</strong> – Local file system event.</p></li>
<li><p><strong>sync_engine</strong> – SyncEngine instance.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of this class with attributes populated from the given
SyncEvent.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="maestral.sync.IndexEntry">
<em class="property">class </em><code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">IndexEntry</code><a class="headerlink" href="#maestral.sync.IndexEntry" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Base</span></code></p>
<p>Represents an entry in our local sync index. All arguments are used to construct
instance attributes. All arguments apart from <code class="docutils literal notranslate"><span class="pre">`content_hash</span></code> and
<code class="docutils literal notranslate"><span class="pre">content_hash_ctime</span></code> are required.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dbx_path_cased</strong> – Dropbox path of the item, correctly cased.</p></li>
<li><p><strong>dbx_path_lower</strong> – Dropbox path of the item in lower case. This acts as a
primary key for the SQL database since there can only be one entry per case-
insensitive Dropbox path.</p></li>
<li><p><strong>dbx_id</strong> – A unique dropbox ID for the file or folder.</p></li>
<li><p><strong>item_type</strong> – The item type: file or folder.</p></li>
<li><p><strong>last_sync</strong> – The last time a local change was uploaded. Should be the ctime of
the local file or folder.</p></li>
<li><p><strong>rev</strong> – The file revision. Will be ‘folder’ for folders.</p></li>
<li><p><strong>content_hash</strong> – A hash representing the file content. Will be ‘folder’ for
folders. May be None if not yet calculated.</p></li>
<li><p><strong>content_hash_ctime</strong> – The ctime for which the content_hash was calculated. If
this is older than the current ctime, the content_hash will be invalid and has
to recalculated.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="maestral.sync.IndexEntry.is_file">
<em class="property">property </em><code class="sig-name descname">is_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.IndexEntry.is_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True for file changes</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.IndexEntry.is_directory">
<em class="property">property </em><code class="sig-name descname">is_directory</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.IndexEntry.is_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True for folder changes</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="maestral.sync.HashCacheEntry">
<em class="property">class </em><code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">HashCacheEntry</code><a class="headerlink" href="#maestral.sync.HashCacheEntry" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Base</span></code></p>
<p>An entry in our cache of content hashes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> – The local path for which the hash is stored.</p></li>
<li><p><strong>hash_str</strong> – The content hash. ‘folder’ for folders.</p></li>
<li><p><strong>mtime</strong> – The mtime of the item just before the hash was computed. When the
current ctime is newer, the hash_str will need to be recalculated.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="maestral.sync.SyncEngine">
<em class="property">class </em><code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">SyncEngine</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">client</span><span class="p">:</span> <span class="n">DropboxClient</span></em>, <em class="sig-param"><span class="n">fs_events_handler</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#maestral.sync.FSEventHandler" title="maestral.sync.FSEventHandler">FSEventHandler</a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#maestral.sync.SyncEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>Class that contains methods to sync local file events with Dropbox and vice versa.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client</strong> – Dropbox API client instance.</p></li>
<li><p><strong>fs_events_handler</strong> – File system event handler to inform us of local events.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="maestral.sync.SyncEngine.dropbox_path">
<em class="property">property </em><code class="sig-name descname">dropbox_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#maestral.sync.SyncEngine.dropbox_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to local Dropbox folder, as loaded from the config file. Before changing
<a class="reference internal" href="#maestral.sync.SyncEngine.dropbox_path" title="maestral.sync.SyncEngine.dropbox_path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">dropbox_path</span></code></a>, make sure that syncing is paused. Move the dropbox folder
to the new location before resuming the sync. Changes are saved to the config
file.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.database_path">
<em class="property">property </em><code class="sig-name descname">database_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#maestral.sync.SyncEngine.database_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Path SQLite database.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.file_cache_path">
<em class="property">property </em><code class="sig-name descname">file_cache_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#maestral.sync.SyncEngine.file_cache_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to cache folder for temporary files (read only). The cache folder
‘.maestral.cache’ is located inside the local Dropbox folder to prevent file
transfer between different partitions or drives during sync.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.excluded_items">
<em class="property">property </em><code class="sig-name descname">excluded_items</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncEngine.excluded_items" title="Permalink to this definition">¶</a></dt>
<dd><p>List of all files and folders excluded from sync. Changes are saved to the
config file. If a parent folder is excluded, its children will automatically be
removed from the list. If only children are given but not the parent folder, any
new items added to the parent will be synced. Change this property <em>before</em>
downloading newly included items or deleting excluded items.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.clean_excluded_items_list">
<em class="property">static </em><code class="sig-name descname">clean_excluded_items_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">folder_list</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncEngine.clean_excluded_items_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes all duplicates and children of excluded items from the excluded items
list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>folder_list</strong> – Dropbox paths to exclude.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Cleaned up items.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.max_cpu_percent">
<em class="property">property </em><code class="sig-name descname">max_cpu_percent</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#maestral.sync.SyncEngine.max_cpu_percent" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum CPU usage for parallel downloads or uploads in percent of the total
available CPU time per core. Individual workers in a thread pool will pause
until the usage drops below this value. Tasks in the main thread such as
indexing file changes may still use more CPU time. Setting this to 200% means
that two full logical CPU core can be used.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.remote_cursor">
<em class="property">property </em><code class="sig-name descname">remote_cursor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#maestral.sync.SyncEngine.remote_cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Cursor from last sync with remote Dropbox. The value is updated and saved to
the config file on every successful download of remote changes.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.local_cursor">
<em class="property">property </em><code class="sig-name descname">local_cursor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#maestral.sync.SyncEngine.local_cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Time stamp from last sync with remote Dropbox. The value is updated and saved
to the config file on every successful upload of local changes.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.last_change">
<em class="property">property </em><code class="sig-name descname">last_change</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#maestral.sync.SyncEngine.last_change" title="Permalink to this definition">¶</a></dt>
<dd><p>The time stamp of the last file change or 0.0 if there are no file changes in
our history.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.last_reindex">
<em class="property">property </em><code class="sig-name descname">last_reindex</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#maestral.sync.SyncEngine.last_reindex" title="Permalink to this definition">¶</a></dt>
<dd><p>Time stamp of last full indexing. This is used to determine when the next
full indexing should take place.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.history">
<em class="property">property </em><code class="sig-name descname">history</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a><span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncEngine.history" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of the last SyncEvents in our history. History will be kept for the
interval specified by the config value``keep_history`` (defaults to two weeks)
and at most <code class="docutils literal notranslate"><span class="pre">_max_history</span></code> events will be returned (defaults to 1,000).</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.clear_sync_history">
<code class="sig-name descname">clear_sync_history</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncEngine.clear_sync_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears the sync history.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.get_index">
<code class="sig-name descname">get_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="#maestral.sync.IndexEntry" title="maestral.sync.IndexEntry">IndexEntry</a><span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncEngine.get_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a copy of the local index of synced files and folders.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List of index entries.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.iter_index">
<code class="sig-name descname">iter_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; Iterator<span class="p">[</span><a class="reference internal" href="#maestral.sync.IndexEntry" title="maestral.sync.IndexEntry">IndexEntry</a><span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncEngine.iter_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator over the local index of synced files and folders.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Iterator over index entries.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.get_local_rev">
<code class="sig-name descname">get_local_rev</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">dbx_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncEngine.get_local_rev" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets revision number of local file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbx_path</strong> – Dropbox path.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Revision number as str or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no local revision number has
been saved.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.get_last_sync">
<code class="sig-name descname">get_last_sync</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">dbx_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#maestral.sync.SyncEngine.get_last_sync" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the timestamp of last sync for an individual path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbx_path</strong> – Dropbox path.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Time of last sync.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.get_index_entry">
<code class="sig-name descname">get_index_entry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">dbx_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#maestral.sync.IndexEntry" title="maestral.sync.IndexEntry">IndexEntry</a><span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncEngine.get_index_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the index entry for the given Dropbox path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbx_path</strong> – Dropbox path.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Index entry or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no entry exists for the given path.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.get_local_hash">
<code class="sig-name descname">get_local_hash</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">local_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncEngine.get_local_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes content hash of a local file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>local_path</strong> – Absolute path on local drive.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Content hash to compare with Dropbox’s content hash, or ‘folder’ if
the path points to a directory. <code class="docutils literal notranslate"><span class="pre">None</span></code> if there is nothing at the path.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.save_local_hash">
<code class="sig-name descname">save_local_hash</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">local_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">hash_str</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">mtime</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncEngine.save_local_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the content hash for a file in our cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> – Absolute path on local drive.</p></li>
<li><p><strong>hash_str</strong> – Hash string to save. If None, the existing cache entry will be
deleted.</p></li>
<li><p><strong>mtime</strong> – Mtime of the file when the hash was computed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.clear_hash_cache">
<code class="sig-name descname">clear_hash_cache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncEngine.clear_hash_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears the sync history.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.update_index_from_sync_event">
<code class="sig-name descname">update_index_from_sync_event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">event</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncEngine.update_index_from_sync_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the local index from a SyncEvent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event</strong> – SyncEvent from download.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.update_index_from_dbx_metadata">
<code class="sig-name descname">update_index_from_dbx_metadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">md</span><span class="p">:</span> <span class="n">Metadata</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncEngine.update_index_from_dbx_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the local index from Dropbox metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>md</strong> – Dropbox metadata.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.remove_path_from_index">
<code class="sig-name descname">remove_path_from_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">dbx_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncEngine.remove_path_from_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes any local index entries for the given path and all its children.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbx_path</strong> – Dropbox path.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.clear_index">
<code class="sig-name descname">clear_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncEngine.clear_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears the revision index.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.mignore_path">
<em class="property">property </em><code class="sig-name descname">mignore_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#maestral.sync.SyncEngine.mignore_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to mignore file on local drive (read only).</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.mignore_rules">
<em class="property">property </em><code class="sig-name descname">mignore_rules</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; pathspec.PathSpec<a class="headerlink" href="#maestral.sync.SyncEngine.mignore_rules" title="Permalink to this definition">¶</a></dt>
<dd><p>List of mignore rules following git wildmatch syntax (read only).</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.is_case_sensitive">
<em class="property">property </em><code class="sig-name descname">is_case_sensitive</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEngine.is_case_sensitive" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the local Dropbox folder is located on a partition with a
case-sensitive file system, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.ensure_dropbox_folder_present">
<code class="sig-name descname">ensure_dropbox_folder_present</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncEngine.ensure_dropbox_folder_present" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the Dropbox folder still exists where we expect it to be.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">errors.DropboxDeletedError</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.clean_cache_dir">
<code class="sig-name descname">clean_cache_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncEngine.clean_cache_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes all items in the cache directory.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.correct_case">
<code class="sig-name descname">correct_case</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">dbx_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#maestral.sync.SyncEngine.correct_case" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a Dropbox path with correctly cased basename to a fully cased path.
This is because Dropbox metadata guarantees the correct casing for the basename
only. In practice, casing of parent directories is often incorrect.
This is done by retrieving the correct casing of the dirname, either from our
cache, our database or from Dropbox servers.</p>
<p>Performance may vary significantly with the number of parent folders:</p>
<ol class="arabic simple">
<li><p>If the parent directory is already in our cache, performance is O(1).</p></li>
<li><p>If the parent directory is already in our sync index, performance is O(1) but
slower than the first case because it requires a SQLAlchemy query.</p></li>
<li><p>If the parent directory is unknown to us, its metadata (including the correct
casing of directory’s basename) is queried from Dropbox. This is used to
construct a correctly cased path by calling <a class="reference internal" href="#maestral.sync.SyncEngine.correct_case" title="maestral.sync.SyncEngine.correct_case"><code class="xref py py-meth docutils literal notranslate"><span class="pre">correct_case()</span></code></a> again. At
best, performance will be of O(2) if the parent directory is known to us, at
worst if will be of order O(n) involving queries to Dropbox servers for each
parent directory.</p></li>
</ol>
<p>When running <a class="reference internal" href="#maestral.sync.SyncEngine.correct_case" title="maestral.sync.SyncEngine.correct_case"><code class="xref py py-meth docutils literal notranslate"><span class="pre">correct_case()</span></code></a> on a large tree of paths, it is therefore best
to do so in hierarchical order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbx_path</strong> – Dropbox path with correctly cased basename, as provided by
<code class="docutils literal notranslate"><span class="pre">Metadata.path_display</span></code> or <code class="docutils literal notranslate"><span class="pre">Metadata.name</span></code>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Correctly cased Dropbox path.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.to_dbx_path">
<code class="sig-name descname">to_dbx_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">local_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#maestral.sync.SyncEngine.to_dbx_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a local path to a path relative to the Dropbox folder. Casing of the
given <code class="docutils literal notranslate"><span class="pre">local_path</span></code> will be preserved.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>local_path</strong> – Absolute path on local drive.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Relative path with respect to Dropbox folder.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code> the path lies outside of the local Dropbox folder.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.to_local_path_from_cased">
<code class="sig-name descname">to_local_path_from_cased</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">dbx_path_cased</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#maestral.sync.SyncEngine.to_local_path_from_cased" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a correctly cased Dropbox path to the corresponding local path. This is
more efficient than <a class="reference internal" href="#maestral.sync.SyncEngine.to_local_path" title="maestral.sync.SyncEngine.to_local_path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_local_path()</span></code></a> which accepts uncased paths.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbx_path_cased</strong> – Path relative to Dropbox folder, correctly cased.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Corresponding local path on drive.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.to_local_path">
<code class="sig-name descname">to_local_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">dbx_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#maestral.sync.SyncEngine.to_local_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a Dropbox path to the corresponding local path. Only the basename must
be correctly cased. This is slower than <a class="reference internal" href="#maestral.sync.SyncEngine.to_local_path_from_cased" title="maestral.sync.SyncEngine.to_local_path_from_cased"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_local_path_from_cased()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbx_path</strong> – Path relative to Dropbox folder, must be correctly cased in its
basename.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Corresponding local path on drive.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.has_sync_errors">
<code class="sig-name descname">has_sync_errors</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEngine.has_sync_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> in case of sync errors, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.clear_sync_error">
<code class="sig-name descname">clear_sync_error</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">local_path</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dbx_path</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncEngine.clear_sync_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears all sync errors for <code class="docutils literal notranslate"><span class="pre">local_path</span></code> or <code class="docutils literal notranslate"><span class="pre">dbx_path</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> – Absolute path on local drive.</p></li>
<li><p><strong>dbx_path</strong> – Path relative to Dropbox folder.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.clear_sync_errors">
<code class="sig-name descname">clear_sync_errors</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncEngine.clear_sync_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears all sync errors.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.is_excluded">
<em class="property">static </em><code class="sig-name descname">is_excluded</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEngine.is_excluded" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a file is excluded from sync. Certain file names are always excluded
from syncing, following the Dropbox support article:</p>
<p><a class="reference external" href="https://help.dropbox.com/installs-integrations/sync-uploads/files-not-syncing">https://help.dropbox.com/installs-integrations/sync-uploads/files-not-syncing</a></p>
<p>This includes file system files such as ‘desktop.ini’ and ‘.DS_Store’ and some
temporary files as well as caches used by Dropbox or Maestral. <cite>is_excluded</cite>
accepts both local and Dropbox paths.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – Path of item. Can be both a local or Dropbox paths.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether the path is excluded from syncing.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.is_excluded_by_user">
<code class="sig-name descname">is_excluded_by_user</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">dbx_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEngine.is_excluded_by_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if file has been excluded through “selective sync” by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbx_path</strong> – Path relative to Dropbox folder.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether the path is excluded from download syncing by the user.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.is_mignore">
<code class="sig-name descname">is_mignore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">event</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a></span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEngine.is_mignore" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if local file change has been excluded by an mignore pattern.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event</strong> – SyncEvent for local file event.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether the path is excluded from upload syncing by the user.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.busy">
<code class="sig-name descname">busy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEngine.busy" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if we are currently syncing.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if <code class="xref py py-attr docutils literal notranslate"><span class="pre">sync_lock</span></code> cannot be acquired, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.upload_local_changes_while_inactive">
<code class="sig-name descname">upload_local_changes_while_inactive</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncEngine.upload_local_changes_while_inactive" title="Permalink to this definition">¶</a></dt>
<dd><p>Collects changes while sync has not been running and uploads them to Dropbox.
Call this method when resuming sync.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.wait_for_local_changes">
<code class="sig-name descname">wait_for_local_changes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">40</span></em>, <em class="sig-param"><span class="n">delay</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">1</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>List<span class="p">[</span><a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a><span class="p">]</span><span class="p">, </span>float<span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncEngine.wait_for_local_changes" title="Permalink to this definition">¶</a></dt>
<dd><p>Waits for local file changes. Returns a list of local changes with at most one
entry per path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeout</strong> – If no changes are detected within timeout (sec), an empty list
is returned.</p></li>
<li><p><strong>delay</strong> – Delay in sec to wait for subsequent changes before returning.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(list of sync times events, time_stamp)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.apply_local_changes">
<code class="sig-name descname">apply_local_changes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">sync_events</span><span class="p">:</span> <span class="n">List<span class="p">[</span><a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">local_cursor</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a><span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncEngine.apply_local_changes" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies locally detected changes to the remote Dropbox. Changes which should be
ignored (mignore or always ignored files) are skipped.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sync_events</strong> – List of local file system events.</p></li>
<li><p><strong>local_cursor</strong> – Time stamp of last event in <code class="docutils literal notranslate"><span class="pre">events</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.get_remote_folder">
<code class="sig-name descname">get_remote_folder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">dbx_path</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'/'</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEngine.get_remote_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets all files/folders from Dropbox and writes them to the local folder
<a class="reference internal" href="#maestral.sync.SyncEngine.dropbox_path" title="maestral.sync.SyncEngine.dropbox_path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">dropbox_path</span></code></a>. Call this method on first run of the Maestral. Indexing
and downloading may take several minutes, depending on the size of the user’s
Dropbox folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbx_path</strong> – Path relative to Dropbox folder. Defaults to root (‘/’).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether download was successful.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.get_remote_item">
<code class="sig-name descname">get_remote_item</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">dbx_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEngine.get_remote_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads a remote file or folder and updates its local rev. If the remote item
no longer exists, the corresponding local item will be deleted. Given paths will
be added to the (persistent) pending_downloads list for the duration of the
download so that they will be resumed in case Maestral is terminated during the
download. If <code class="docutils literal notranslate"><span class="pre">dbx_path</span></code> refers to a folder, the download will be handled by
<a class="reference internal" href="#maestral.sync.SyncEngine.get_remote_folder" title="maestral.sync.SyncEngine.get_remote_folder"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_remote_folder()</span></code></a>. If it refers to a single file, the download will be
performed by <code class="xref py py-meth docutils literal notranslate"><span class="pre">_create_local_entry()</span></code>.</p>
<p>This method can be used to fetch individual items outside of the regular sync
cycle, for instance when including a previously excluded file or folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dbx_path</strong> – Path relative to Dropbox folder.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether download was successful.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.wait_for_remote_changes">
<code class="sig-name descname">wait_for_remote_changes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">last_cursor</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">40</span></em>, <em class="sig-param"><span class="n">delay</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">2</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEngine.wait_for_remote_changes" title="Permalink to this definition">¶</a></dt>
<dd><p>Blocks until changes to the remote Dropbox are available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>last_cursor</strong> – Cursor form last sync.</p></li>
<li><p><strong>timeout</strong> – Timeout in seconds before returning even if there are no
changes. Dropbox adds random jitter of up to 90 sec to this value.</p></li>
<li><p><strong>delay</strong> – Delay in sec to wait for subsequent changes that may be
duplicates. This delay is typically only necessary folders are shared /
un-shared with other Dropbox accounts.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.list_remote_changes">
<code class="sig-name descname">list_remote_changes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">last_cursor</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>List<span class="p">[</span><a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a><span class="p">]</span><span class="p">, </span>str<span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncEngine.list_remote_changes" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists remote changes since the last download sync.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>last_cursor</strong> – Cursor from last download sync.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple with remote changes and corresponding cursor</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.list_remote_changes_iterator">
<code class="sig-name descname">list_remote_changes_iterator</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">last_cursor</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Iterator<span class="p">[</span>Tuple<span class="p">[</span>List<span class="p">[</span><a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a><span class="p">]</span><span class="p">, </span>Optional<span class="p">[</span>str<span class="p">]</span><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncEngine.list_remote_changes_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists remote changes since the last download sync. Works the same as
<a class="reference internal" href="#maestral.sync.SyncEngine.list_remote_changes" title="maestral.sync.SyncEngine.list_remote_changes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list_remote_changes()</span></code></a> but returns an iterator over remote changes. Only
the last result will have a valid cursor which is not None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>last_cursor</strong> – Cursor from last download sync.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Iterator yielding tuples with remote changes and corresponding cursor.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.apply_remote_changes">
<code class="sig-name descname">apply_remote_changes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">sync_events</span><span class="p">:</span> <span class="n">List<span class="p">[</span><a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">cursor</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a><span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncEngine.apply_remote_changes" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies remote changes to local folder. Call this on the result of
<a class="reference internal" href="#maestral.sync.SyncEngine.list_remote_changes" title="maestral.sync.SyncEngine.list_remote_changes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list_remote_changes()</span></code></a>. The saved cursor is updated after a set of changes
has been successfully applied. Entries in the local index are created after
successful completion.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sync_events</strong> – List of remote changes.</p></li>
<li><p><strong>cursor</strong> – Remote cursor corresponding to changes. Take care to only pass
cursors which represent the state of the entire Dropbox. Pass None instead
if you are only downloading a subset of changes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of changes that were made to local files and bool indicating if
all download syncs were successful.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.notify_user">
<code class="sig-name descname">notify_user</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">sync_events</span><span class="p">:</span> <span class="n">List<span class="p">[</span><a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncEngine.notify_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Shows a desktop notification for the given file changes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sync_events</strong> – List of SyncEvents from download sync.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.has_unsynced_changes">
<code class="sig-name descname">has_unsynced_changes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">local_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.SyncEngine.has_unsynced_changes" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a local item has any unsynced changes. This is by comparing its ctime
to the <code class="docutils literal notranslate"><span class="pre">last_sync</span></code> time saved in our index. In case of folders, we recursively
check the ctime of children.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>local_path</strong> – Local path of item to check.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether the local item has unsynced changes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncEngine.rescan">
<code class="sig-name descname">rescan</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">local_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncEngine.rescan" title="Permalink to this definition">¶</a></dt>
<dd><p>Forces a rescan of a local path: schedules created events for every folder,
modified events for every file and deleted events for every deleted item
(compared to our index).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>local_path</strong> – Path to rescan.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="maestral.sync.download_worker">
<code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">download_worker</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sync</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#maestral.sync.SyncEngine" title="maestral.sync.SyncEngine">SyncEngine</a></span></em>, <em class="sig-param"><span class="n">syncing</span><span class="p">:</span> <span class="n">Event</span></em>, <em class="sig-param"><span class="n">running</span><span class="p">:</span> <span class="n">Event</span></em>, <em class="sig-param"><span class="n">connected</span><span class="p">:</span> <span class="n">Event</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.download_worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Worker to sync changes of remote Dropbox with local folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sync</strong> – Instance of <a class="reference internal" href="#maestral.sync.SyncEngine" title="maestral.sync.SyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">SyncEngine</span></code></a>.</p></li>
<li><p><strong>syncing</strong> – Event that indicates if workers are running or paused.</p></li>
<li><p><strong>running</strong> – Event to shutdown local file event handler and worker threads.</p></li>
<li><p><strong>connected</strong> – Event that indicates if we can connect to Dropbox.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="maestral.sync.download_worker_added_item">
<code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">download_worker_added_item</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sync</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#maestral.sync.SyncEngine" title="maestral.sync.SyncEngine">SyncEngine</a></span></em>, <em class="sig-param"><span class="n">syncing</span><span class="p">:</span> <span class="n">Event</span></em>, <em class="sig-param"><span class="n">running</span><span class="p">:</span> <span class="n">Event</span></em>, <em class="sig-param"><span class="n">connected</span><span class="p">:</span> <span class="n">Event</span></em>, <em class="sig-param"><span class="n">added_item_queue</span><span class="p">:</span> <span class="n">Queue<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.download_worker_added_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Worker to download items which have been newly included in sync.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sync</strong> – Instance of <a class="reference internal" href="#maestral.sync.SyncEngine" title="maestral.sync.SyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">SyncEngine</span></code></a>.</p></li>
<li><p><strong>syncing</strong> – Event that indicates if workers are running or paused.</p></li>
<li><p><strong>running</strong> – Event to shutdown local file event handler and worker threads.</p></li>
<li><p><strong>connected</strong> – Event that indicates if we can connect to Dropbox.</p></li>
<li><p><strong>added_item_queue</strong> – Queue with newly added items to download. Entries are
Dropbox paths.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="maestral.sync.upload_worker">
<code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">upload_worker</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sync</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#maestral.sync.SyncEngine" title="maestral.sync.SyncEngine">SyncEngine</a></span></em>, <em class="sig-param"><span class="n">syncing</span><span class="p">:</span> <span class="n">Event</span></em>, <em class="sig-param"><span class="n">running</span><span class="p">:</span> <span class="n">Event</span></em>, <em class="sig-param"><span class="n">connected</span><span class="p">:</span> <span class="n">Event</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.upload_worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Worker to sync local changes to remote Dropbox.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sync</strong> – Instance of <a class="reference internal" href="#maestral.sync.SyncEngine" title="maestral.sync.SyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">SyncEngine</span></code></a>.</p></li>
<li><p><strong>syncing</strong> – Event that indicates if workers are running or paused.</p></li>
<li><p><strong>running</strong> – Event to shutdown local file event handler and worker threads.</p></li>
<li><p><strong>connected</strong> – Event that indicates if we can connect to Dropbox.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="maestral.sync.startup_worker">
<code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">startup_worker</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sync</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#maestral.sync.SyncEngine" title="maestral.sync.SyncEngine">SyncEngine</a></span></em>, <em class="sig-param"><span class="n">syncing</span><span class="p">:</span> <span class="n">Event</span></em>, <em class="sig-param"><span class="n">running</span><span class="p">:</span> <span class="n">Event</span></em>, <em class="sig-param"><span class="n">connected</span><span class="p">:</span> <span class="n">Event</span></em>, <em class="sig-param"><span class="n">startup</span><span class="p">:</span> <span class="n">Event</span></em>, <em class="sig-param"><span class="n">paused_by_user</span><span class="p">:</span> <span class="n">Event</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.startup_worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Worker to sync local changes to remote Dropbox.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sync</strong> – Instance of <a class="reference internal" href="#maestral.sync.SyncEngine" title="maestral.sync.SyncEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">SyncEngine</span></code></a>.</p></li>
<li><p><strong>syncing</strong> – Event that indicates if workers are running or paused.</p></li>
<li><p><strong>running</strong> – Event to shutdown local file event handler and worker threads.</p></li>
<li><p><strong>connected</strong> – Event that indicates if we can connect to Dropbox.</p></li>
<li><p><strong>startup</strong> – Set when we should run startup routines.</p></li>
<li><p><strong>paused_by_user</strong> – Set when syncing has been paused by the user.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="maestral.sync.SyncMonitor">
<em class="property">class </em><code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">SyncMonitor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">client</span><span class="p">:</span> <span class="n">DropboxClient</span></em><span class="sig-paren">)</span><a class="headerlink" href="#maestral.sync.SyncMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to sync changes between Dropbox and a local folder. It creates five threads:
<cite>observer</cite> to retrieve local file system events, <cite>startup_thread</cite> to carry out any
startup jobs such as initial syncs, <cite>upload_thread</cite> to upload local changes to
Dropbox, and <cite>download_thread</cite> to query for and download remote changes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>client</strong> – The Dropbox API client, a wrapper around the Dropbox Python SDK.</p>
</dd>
</dl>
<dl class="py method">
<dt id="maestral.sync.SyncMonitor.activity">
<em class="property">property </em><code class="sig-name descname">activity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a><span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncMonitor.activity" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list all items queued for or currently syncing.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncMonitor.history">
<em class="property">property </em><code class="sig-name descname">history</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="#maestral.sync.SyncEvent" title="maestral.sync.SyncEvent">SyncEvent</a><span class="p">]</span><a class="headerlink" href="#maestral.sync.SyncMonitor.history" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of the last SyncEvents in our history. History will be kept for the
interval specified by the config value``keep_history`` (defaults to two weeks)
and at most <code class="docutils literal notranslate"><span class="pre">_max_history</span></code> events will be returned (defaults to 1,000).</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncMonitor.idle_time">
<em class="property">property </em><code class="sig-name descname">idle_time</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#maestral.sync.SyncMonitor.idle_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the idle time in seconds since the last file change or since startup
if there haven’t been any changes in our current session.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncMonitor.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncMonitor.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates observer threads and starts syncing.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncMonitor.pause">
<code class="sig-name descname">pause</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncMonitor.pause" title="Permalink to this definition">¶</a></dt>
<dd><p>Pauses syncing.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncMonitor.resume">
<code class="sig-name descname">resume</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncMonitor.resume" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks for changes while idle and starts syncing.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncMonitor.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncMonitor.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops syncing and destroys worker threads.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncMonitor.connection_monitor">
<code class="sig-name descname">connection_monitor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncMonitor.connection_monitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Monitors the connection to Dropbox servers. Pauses syncing when the connection
is lost and resumes syncing when reconnected and syncing has not been paused by
the user.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncMonitor.reset_sync_state">
<code class="sig-name descname">reset_sync_state</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncMonitor.reset_sync_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets all saved sync state.</p>
</dd></dl>

<dl class="py method">
<dt id="maestral.sync.SyncMonitor.rebuild_index">
<code class="sig-name descname">rebuild_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.SyncMonitor.rebuild_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Rebuilds the rev file by comparing remote with local files and updating rev
numbers from the Dropbox server. Files are compared by their content hashes and
conflicting copies are created if the contents differ. File changes during the
rebuild process will be queued and uploaded once rebuilding has completed.</p>
<p>Rebuilding will be performed asynchronously.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="maestral.sync.exc_info_tuple">
<code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">exc_info_tuple</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">exc</span><span class="p">:</span> <span class="n">BaseException</span></em><span class="sig-paren">)</span> &#x2192; ExecInfoType<a class="headerlink" href="#maestral.sync.exc_info_tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an exc-info tuple from an exception.</p>
</dd></dl>

<dl class="py function">
<dt id="maestral.sync.get_dest_path">
<code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">get_dest_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event</span><span class="p">:</span> <span class="n">FileSystemEvent</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#maestral.sync.get_dest_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the dest_path of a file system event if present (moved events only)
otherwise returns the src_path (which is also the “destination”).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event</strong> – Watchdog file system event.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Destination path for moved event, source path otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="maestral.sync.split_moved_event">
<code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">split_moved_event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>FileMovedEvent<span class="p">, </span>DirMovedEvent<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>FileSystemEvent<span class="p">, </span>FileSystemEvent<span class="p">]</span><a class="headerlink" href="#maestral.sync.split_moved_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits a FileMovedEvent or DirMovedEvent into “deleted” and “created” events of the
same type. A new attribute <code class="docutils literal notranslate"><span class="pre">move_id</span></code> is added to both instances.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event</strong> – Original event.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple of deleted and created events.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="maestral.sync.entries_repr">
<code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">entries_repr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">entries</span><span class="p">:</span> <span class="n">List<span class="p">[</span>Metadata<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#maestral.sync.entries_repr" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a nicely formatted string repr from a list of Dropbox metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entries</strong> – List of Dropbox metadata.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>String representation of the list.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="maestral.sync.throttled_log">
<code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">throttled_log</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">log</span><span class="p">:</span> <span class="n">logging.Logger</span></em>, <em class="sig-param"><span class="n">msg</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">level</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">logging.INFO</span></em>, <em class="sig-param"><span class="n">limit</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">2</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#maestral.sync.throttled_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Emits the given log message only if the previous message was emitted more than
<code class="docutils literal notranslate"><span class="pre">limit</span></code> seconds ago. This can be used to prevent spamming a log with frequent
updates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log</strong> – Logger used to emit the message.</p></li>
<li><p><strong>msg</strong> – Log message.</p></li>
<li><p><strong>level</strong> – Log level.</p></li>
<li><p><strong>limit</strong> – Minimum time between log messages.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="maestral.sync.cpu_usage_percent">
<code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">cpu_usage_percent</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">interval</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">0.1</span></em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#maestral.sync.cpu_usage_percent" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a float representing the CPU utilization of the current process as a
percentage. This duplicates the similar method from psutil to avoid the psutil
dependency.</p>
<p>Compares process times to system CPU times elapsed before and after the interval
(blocking). It is recommended for accuracy that this function be called with an
interval of at least 0.1 sec.</p>
<p>A value &gt; 100.0 can be returned in case of processes running multiple threads on
different CPU cores. The returned value is explicitly NOT split evenly between all
available logical CPUs. This means that a busy loop process running on a system with
2 logical CPUs will be reported as having 100% CPU utilization instead of 50%.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>interval</strong> – Interval in sec between comparisons of CPU times.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>CPU usage during interval in percent.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="maestral.sync.check_connection">
<code class="sig-prename descclassname">maestral.sync.</code><code class="sig-name descname">check_connection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hostname</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#maestral.sync.check_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>A low latency check for an internet connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hostname</strong> – Hostname to use for connection check.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Connection availability.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../oauth/index.html" class="btn btn-neutral float-left" title="maestral.oauth" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Sam Schott

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>